//-----------------------------------------------------------------------------
//!
//!	@file	gmSystemAsset.cpp
//!	@brief	アセット管理システム
//!	@author Yuki Ishigaki
//!
//-----------------------------------------------------------------------------
#include "stdafx.h"


//-----------------------------------------------------------------------------
//! コンストラクタ
//-----------------------------------------------------------------------------
SystemAsset::SystemAsset()
{
	
}

//-----------------------------------------------------------------------------
//! デストラクタ
//-----------------------------------------------------------------------------
SystemAsset::~SystemAsset()
{
	cleanup();
}

//-----------------------------------------------------------------------------
//! 初期化
//-----------------------------------------------------------------------------
bool SystemAsset::init()
{
	return true;
}

//-----------------------------------------------------------------------------
//! 解放
//-----------------------------------------------------------------------------
void SystemAsset::cleanup()
{

}

//-----------------------------------------------------------------------------
//! アセットの読み込み作成
//!	@param	[in]	type	アセットの型情報
//!	@param	[in]	path	ファイルパス
//!	@return	アセットのクラス (nullptrなら失敗)
//-----------------------------------------------------------------------------
AssetBase* SystemAsset::create(const Type& type, GM_CSTR path)
{
	// もらったtypeでインスタンス生成してAssetBaseにキャスト
	AssetBase* p = (AssetBase*)type.createInstance();
	// 生成できなければ
	if( p == nullptr ) {
		// nullを返す
		return nullptr;
	}

	// 読み込み失敗していたら
	if( !p->load(path) )
	{
		GM_RELEASE(p);
		return nullptr;
	}

	// 読み込みしたものを返す
	return p;
}


//=============================================================================
//	END OF FILE
//=============================================================================